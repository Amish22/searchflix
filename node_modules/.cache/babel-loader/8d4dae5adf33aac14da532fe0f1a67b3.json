{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\myMovieApp\\\\src\\\\Components\\\\FilmsGrid.js\";\nimport React, { Component } from \"react\";\nimport { DataView, DataViewLayoutOptions } from \"primereact/dataview\";\nimport \"primereact/resources/themes/saga-blue/theme.css\";\nimport \"primereact/resources/primereact.min.css\";\nimport \"primeicons/primeicons.css\";\nimport \"primeflex/primeflex.css\";\nimport GridItem from \"./GridItem\";\nimport ItemDetails from \"./ItemDetails\";\nexport default class FilmsGrid extends Component {\n  constructor() {\n    super();\n\n    this.fetchData = pageNumber => {\n      return fetch(`http://www.omdbapi.com/?s=${this.props.title}&apikey=7de47267&page=${pageNumber}&y=${this.props.year}&type=${\"movie\"}`).then(resp => resp).then(resp => resp.json()).then(response => {\n        if (response.totalRecords < 10) this.rows = response.totalRecordes;else this.rows = 10;\n        this.datasource = response.Search;\n        this.setState({\n          totalRecords: Number(response.totalResults),\n          products: this.datasource,\n          loading: false\n        });\n      });\n    };\n\n    this.openDetails = filmId => {\n      this.setState({\n        itemDetailsIsOpen: true,\n        selectedFilmId: filmId\n      });\n    };\n\n    this.close_details = () => {\n      this.setState({\n        itemDetailsIsOpen: false\n      });\n    };\n\n    this.state = {\n      products: null,\n      layout: \"grid\",\n      loading: true,\n      first: 0,\n      totalRecords: 0,\n      itemDetailsIsOpen: false\n    };\n    this.rows = 10;\n    this.load;\n    this.itemTemplate = this.itemTemplate.bind(this);\n    this.onPage = this.onPage.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.fetchData(1);\n    }, 1000);\n  }\n\n  loadmore() {\n    this.setState(old => {\n      return {\n        rows: old.rows + 10\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.title !== this.props.title || prevProps.year !== this.props.year || prevProps.searchType !== this.props.searchType) {\n      setTimeout(() => {\n        this.fetchData(1);\n      }, 1000);\n    }\n  }\n\n  ///pagination controls\n  onPage(event) {\n    this.setState({\n      first: event.first\n    }); // fetch data need page number to calculate we get index of first element in page\n    // divided be number of elemnt in each page add one because it starts from 0\n\n    this.fetchData(event.first / this.rows + 1);\n  } // render as grid\n\n\n  itemTemplate(product, layout) {\n    if (!product) {\n      return \"\";\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GridItem, {\n      data: product,\n      openDetails: this.openDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  render() {\n    const header = this.renderHeader();\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dataview-demo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(DataView, {\n      value: this.state.products,\n      layout: this.state.layout,\n      header: header,\n      itemTemplate: this.itemTemplate,\n      lazy: true,\n      paginator: true,\n      paginatorPosition: \"bottom\",\n      rows: this.rows,\n      totalRecords: this.state.totalRecords,\n      first: this.state.first,\n      onPage: this.onPage,\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.loadmore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, \"LOAD MORE\")))), /*#__PURE__*/React.createElement(ItemDetails, {\n      close_details: this.close_details,\n      itemDetailsIsOpen: this.state.itemDetailsIsOpen,\n      selectedFilmId: this.state.selectedFilmId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/amish/OneDrive/Desktop/myMovieApp/src/Components/FilmsGrid.js"],"names":["React","Component","DataView","DataViewLayoutOptions","GridItem","ItemDetails","FilmsGrid","constructor","fetchData","pageNumber","fetch","props","title","year","then","resp","json","response","totalRecords","rows","totalRecordes","datasource","Search","setState","Number","totalResults","products","loading","openDetails","filmId","itemDetailsIsOpen","selectedFilmId","close_details","state","layout","first","load","itemTemplate","bind","onPage","componentDidMount","setTimeout","loadmore","old","componentDidUpdate","prevProps","searchType","event","product","render","header","renderHeader"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,EAAmBC,qBAAnB,QAAgD,qBAAhD;AACA,OAAO,iDAAP;AACA,OAAO,yCAAP;AACA,OAAO,2BAAP;AACA,OAAO,yBAAP;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,eAAe,MAAMC,SAAN,SAAwBL,SAAxB,CAAkC;AAC/CM,EAAAA,WAAW,GAAG;AACZ;;AADY,SAwCdC,SAxCc,GAwCDC,UAAD,IAAgB;AAC1B,aAAOC,KAAK,CACT,6BAA4B,KAAKC,KAAL,CAAWC,KAAM,yBAAwBH,UAAW,MAAK,KAAKE,KAAL,CAAWE,IAAK,SAAQ,OAAQ,EAD5G,CAAL,CAGJC,IAHI,CAGEC,IAAD,IAAUA,IAHX,EAIJD,IAJI,CAIEC,IAAD,IAAUA,IAAI,CAACC,IAAL,EAJX,EAKJF,IALI,CAKEG,QAAD,IAAc;AAElB,YAAIA,QAAQ,CAACC,YAAT,GAAwB,EAA5B,EAAgC,KAAKC,IAAL,GAAYF,QAAQ,CAACG,aAArB,CAAhC,KACK,KAAKD,IAAL,GAAY,EAAZ;AACL,aAAKE,UAAL,GAAkBJ,QAAQ,CAACK,MAA3B;AACA,aAAKC,QAAL,CAAc;AACZL,UAAAA,YAAY,EAAEM,MAAM,CAACP,QAAQ,CAACQ,YAAV,CADR;AAEZC,UAAAA,QAAQ,EAAE,KAAKL,UAFH;AAGZM,UAAAA,OAAO,EAAE;AAHG,SAAd;AAKD,OAfI,CAAP;AAgBD,KAzDa;;AAAA,SA6DdC,WA7Dc,GA6DCC,MAAD,IAAY;AAExB,WAAKN,QAAL,CAAc;AACZO,QAAAA,iBAAiB,EAAE,IADP;AAEZC,QAAAA,cAAc,EAAEF;AAFJ,OAAd;AAID,KAnEa;;AAAA,SAoEdG,aApEc,GAoEE,MAAM;AACpB,WAAKT,QAAL,CAAc;AACZO,QAAAA,iBAAiB,EAAE;AADP,OAAd;AAGD,KAxEa;;AAEZ,SAAKG,KAAL,GAAa;AACXP,MAAAA,QAAQ,EAAE,IADC;AAEXQ,MAAAA,MAAM,EAAE,MAFG;AAGXP,MAAAA,OAAO,EAAE,IAHE;AAIXQ,MAAAA,KAAK,EAAE,CAJI;AAKXjB,MAAAA,YAAY,EAAE,CALH;AAMXY,MAAAA,iBAAiB,EAAE;AANR,KAAb;AASA,SAAKX,IAAL,GAAY,EAAZ;AACA,SAAKiB,IAAL;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,UAAU,CAAC,MAAM;AACf,WAAKjC,SAAL,CAAe,CAAf;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;;AACDkC,EAAAA,QAAQ,GAAE;AACR,SAAKnB,QAAL,CAAeoB,GAAD,IAAO;AACrB,aAAM;AAACxB,QAAAA,IAAI,EAACwB,GAAG,CAACxB,IAAJ,GAAW;AAAjB,OAAN;AACD,KAFC;AAEC;;AAEHyB,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAE5B,QACEA,SAAS,CAACjC,KAAV,KAAoB,KAAKD,KAAL,CAAWC,KAA/B,IACAiC,SAAS,CAAChC,IAAV,KAAmB,KAAKF,KAAL,CAAWE,IAD9B,IAEAgC,SAAS,CAACC,UAAV,KAAyB,KAAKnC,KAAL,CAAWmC,UAHtC,EAIE;AAEAL,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKjC,SAAL,CAAe,CAAf;AACD,OAFS,EAEP,IAFO,CAAV;AAGD;AACF;;AAkCD;AACA+B,EAAAA,MAAM,CAACQ,KAAD,EAAQ;AACZ,SAAKxB,QAAL,CAAc;AACZY,MAAAA,KAAK,EAAEY,KAAK,CAACZ;AADD,KAAd,EADY,CAIZ;AACA;;AAEA,SAAK3B,SAAL,CAAeuC,KAAK,CAACZ,KAAN,GAAc,KAAKhB,IAAnB,GAA0B,CAAzC;AACD,GAnF8C,CAqFjD;;;AACEkB,EAAAA,YAAY,CAACW,OAAD,EAAUd,MAAV,EAAkB;AAC5B,QAAI,CAACc,OAAL,EAAc;AACZ,aAAO,EAAP;AACD;;AACD,wBACE,uDACI,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEA,OAAhB;AAAyB,MAAA,WAAW,EAAE,KAAKpB,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADF;AAKD;;AAIDqB,EAAAA,MAAM,GAAG;AACP,UAAMC,MAAM,GAAG,KAAKC,YAAL,EAAf;AAEA,wBACE,uDACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,KAAKlB,KAAL,CAAWP,QADpB;AAEE,MAAA,MAAM,EAAE,KAAKO,KAAL,CAAWC,MAFrB;AAGE,MAAA,MAAM,EAAEgB,MAHV;AAIE,MAAA,YAAY,EAAE,KAAKb,YAJrB;AAKE,MAAA,IAAI,MALN;AAME,MAAA,SAAS,MANX;AAOE,MAAA,iBAAiB,EAAE,QAPrB;AAQE,MAAA,IAAI,EAAE,KAAKlB,IARb;AASE,MAAA,YAAY,EAAE,KAAKc,KAAL,CAAWf,YAT3B;AAUE,MAAA,KAAK,EAAE,KAAKe,KAAL,CAAWE,KAVpB;AAWE,MAAA,MAAM,EAAE,KAAKI,MAXf;AAYE,MAAA,OAAO,EAAE,KAAKN,KAAL,CAAWN,OAZtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAeE;AAAK,MAAA,KAAK,EAAG,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,IAAI,EAAG,QAAf;AAAwB,MAAA,OAAO,EAAE,KAAKe,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAfF,CADF,CADF,eA0BE,oBAAC,WAAD;AACE,MAAA,aAAa,EAAE,KAAKV,aADtB;AAEE,MAAA,iBAAiB,EAAE,KAAKC,KAAL,CAAWH,iBAFhC;AAGE,MAAA,cAAc,EAAE,KAAKG,KAAL,CAAWF,cAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,CADF;AAkCD;;AAxI8C","sourcesContent":["import React, { Component } from \"react\";\nimport { DataView, DataViewLayoutOptions } from \"primereact/dataview\";\nimport \"primereact/resources/themes/saga-blue/theme.css\";\nimport \"primereact/resources/primereact.min.css\";\nimport \"primeicons/primeicons.css\";\nimport \"primeflex/primeflex.css\";\nimport GridItem from \"./GridItem\";\nimport ItemDetails from \"./ItemDetails\";\n\nexport default class FilmsGrid extends Component {\n  constructor() {\n    super();\n    this.state = {\n      products: null,\n      layout: \"grid\",\n      loading: true,\n      first: 0,\n      totalRecords: 0,\n      itemDetailsIsOpen: false,\n      \n    };\n    this.rows = 10;\n    this.load\n    this.itemTemplate = this.itemTemplate.bind(this);\n    this.onPage = this.onPage.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.fetchData(1);\n    }, 1000);\n  }\n  loadmore(){\n    this.setState((old)=>{\n    return{rows:old.rows + 10}\n  })}\n\n  componentDidUpdate(prevProps) {\n \n    if (\n      prevProps.title !== this.props.title ||\n      prevProps.year !== this.props.year ||\n      prevProps.searchType !== this.props.searchType\n    ) {\n   \n      setTimeout(() => {\n        this.fetchData(1);\n      }, 1000);\n    }\n  }\n  fetchData = (pageNumber) => {\n    return fetch(\n      `http://www.omdbapi.com/?s=${this.props.title}&apikey=7de47267&page=${pageNumber}&y=${this.props.year}&type=${\"movie\"}`\n    )\n      .then((resp) => resp)\n      .then((resp) => resp.json())\n      .then((response) => {\n     \n        if (response.totalRecords < 10) this.rows = response.totalRecordes;\n        else this.rows = 10;\n        this.datasource = response.Search;\n        this.setState({\n          totalRecords: Number(response.totalResults),\n          products: this.datasource,\n          loading: false,\n        });\n      });\n  };\n\n  \n  // codes related to open film details\n  openDetails = (filmId) => {\n\n    this.setState({\n      itemDetailsIsOpen: true,\n      selectedFilmId: filmId,\n    });\n  };\n  close_details = () => {\n    this.setState({\n      itemDetailsIsOpen: false,\n    });\n  };\n  ///pagination controls\n  onPage(event) {\n    this.setState({\n      first: event.first,\n    });\n    // fetch data need page number to calculate we get index of first element in page\n    // divided be number of elemnt in each page add one because it starts from 0\n\n    this.fetchData(event.first / this.rows + 1);\n  }\n  \n// render as grid\n  itemTemplate(product, layout) {\n    if (!product) {\n      return \"\";\n    }\n    return (\n      <>\n          <GridItem data={product} openDetails={this.openDetails} />\n      </>\n    );\n  }\n\n\n\n  render() {\n    const header = this.renderHeader();\n\n    return (\n      <>\n        <div className=\"dataview-demo\">\n          <div className=\"card\" >\n            <DataView \n              value={this.state.products}\n              layout={this.state.layout}\n              header={header}\n              itemTemplate={this.itemTemplate}\n              lazy\n              paginator\n              paginatorPosition={\"bottom\"}\n              rows={this.rows}\n              totalRecords={this.state.totalRecords}\n              first={this.state.first}\n              onPage={this.onPage}\n              loading={this.state.loading}\n            />\n            <div class = \"col-md-12\">\n              <button type = \"button\" onClick={this.loadmore}>\n              LOAD MORE\n              </button>\n\n            </div>\n          </div>\n        </div>\n\n        <ItemDetails\n          close_details={this.close_details}\n          itemDetailsIsOpen={this.state.itemDetailsIsOpen}\n          selectedFilmId={this.state.selectedFilmId}\n        />\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}