{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\searchflix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\searchflix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\searchflix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\searchflix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\amish\\\\OneDrive\\\\Desktop\\\\searchflix\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{DataView}from\"primereact/dataview\";import\"primereact/resources/themes/saga-blue/theme.css\";import\"primereact/resources/primereact.min.css\";import\"primeicons/primeicons.css\";import\"primeflex/primeflex.css\";import MovieBox from\"./MovieBox\";import MovieModal from\"./MovieModal\";var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);var _super=_createSuper(Movies);function Movies(){var _this;_classCallCheck(this,Movies);_this=_super.call(this);_this.fetchData=function(pageNumber){return fetch(\"https://www.omdbapi.com/?s=\".concat(_this.props.title,\"&apikey=7de47267&page=\").concat(pageNumber,\"&y=\").concat(_this.props.year,\"&type=\",\"movie\")).then(function(resp){return resp;}).then(function(resp){return resp.json();}).then(function(response){if(response.totalRecords<10)_this.rows=response.totalRecordes;else _this.rows=10;_this.datasource=response.Search;_this.setState({totalRecords:Number(response.totalResults),products:_this.datasource,loading:false});});};_this.openDetails=function(filmId){_this.setState({MovieModalIsOpen:true,selectedFilmId:filmId});};_this.close_details=function(){_this.setState({MovieModalIsOpen:false});};_this.state={products:null,layout:\"grid\",loading:true,first:0,totalRecords:0,MovieModalIsOpen:false};_this.rows=10;_this.itemTemplate=_this.itemTemplate.bind(_assertThisInitialized(_this));_this.onPage=_this.onPage.bind(_assertThisInitialized(_this));return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;setTimeout(function(){_this2.fetchData(1);},1000);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this3=this;if(prevProps.title!==this.props.title||prevProps.year!==this.props.year||prevProps.searchType!==this.props.searchType){setTimeout(function(){_this3.fetchData(1);},1000);}}},{key:\"onPage\",value:///pagination controls\nfunction onPage(event){this.setState({first:event.first});// use page number to calculate index of first element in page\n// divided by number of elemnt in each page add one (starts from 0)\nthis.fetchData(event.first/this.rows+1);}// render as grid\n},{key:\"itemTemplate\",value:function itemTemplate(product,layout){if(!product){return\"\";}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MovieBox,{data:product,openDetails:this.openDetails}));}},{key:\"renderHeader\",value:function renderHeader(){}},{key:\"render\",value:function render(){var header=this.renderHeader();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"movie-grid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\",style:{backgroundColor:\"#001a33\"}},/*#__PURE__*/React.createElement(DataView,{value:this.state.products,layout:this.state.layout,header:header,itemTemplate:this.itemTemplate,lazy:true,paginator:true,paginatorPosition:\"bottom\",rows:this.rows,totalRecords:this.state.totalRecords,first:this.state.first,onPage:this.onPage,loading:this.state.loading}))),/*#__PURE__*/React.createElement(MovieModal,{close_details:this.close_details,MovieModalIsOpen:this.state.MovieModalIsOpen,selectedFilmId:this.state.selectedFilmId}));}}]);return Movies;}(Component);export{Movies as default};","map":{"version":3,"sources":["C:/Users/amish/OneDrive/Desktop/searchflix/src/Components/Movies.js"],"names":["React","Component","DataView","MovieBox","MovieModal","Movies","fetchData","pageNumber","fetch","props","title","year","then","resp","json","response","totalRecords","rows","totalRecordes","datasource","Search","setState","Number","totalResults","products","loading","openDetails","filmId","MovieModalIsOpen","selectedFilmId","close_details","state","layout","first","itemTemplate","bind","onPage","setTimeout","prevProps","searchType","event","product","header","renderHeader","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { DataView } from \"primereact/dataview\";\nimport \"primereact/resources/themes/saga-blue/theme.css\";\nimport \"primereact/resources/primereact.min.css\";\nimport \"primeicons/primeicons.css\";\nimport \"primeflex/primeflex.css\";\nimport MovieBox from \"./MovieBox\";\nimport MovieModal from \"./MovieModal\";\n\nexport default class Movies extends Component {\n  constructor() {\n    super();\n    this.state = {\n      products: null,\n      layout: \"grid\",\n      loading: true,\n      first: 0,\n      totalRecords: 0,\n      MovieModalIsOpen: false,\n    };\n    this.rows = 10;\n\n    this.itemTemplate = this.itemTemplate.bind(this);\n    this.onPage = this.onPage.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.fetchData(1);\n    }, 1000);\n  }\n  componentDidUpdate(prevProps) {\n \n    if (\n      prevProps.title !== this.props.title ||\n      prevProps.year !== this.props.year ||\n      prevProps.searchType !== this.props.searchType\n    ) {\n   \n      setTimeout(() => {\n        this.fetchData(1);\n      }, 1000);\n    }\n  }\n  fetchData = (pageNumber) => {\n    return fetch(\n      `https://www.omdbapi.com/?s=${this.props.title}&apikey=7de47267&page=${pageNumber}&y=${this.props.year}&type=${\"movie\"}`\n    )\n      .then((resp) => resp)\n      .then((resp) => resp.json())\n      .then((response) => {\n     \n        if (response.totalRecords < 10) this.rows = response.totalRecordes;\n        else this.rows = 10;\n        this.datasource = response.Search;\n        this.setState({\n          totalRecords: Number(response.totalResults),\n          products: this.datasource,\n          loading: false,\n        });\n      });\n  };\n\n  // movie details\n  openDetails = (filmId) => {\n\n    this.setState({\n      MovieModalIsOpen: true,\n      selectedFilmId: filmId,\n    });\n  };\n  close_details = () => {\n    this.setState({\n      MovieModalIsOpen: false,\n    });\n  };\n  ///pagination controls\n  onPage(event) {\n    this.setState({\n      first: event.first,\n    });\n    // use page number to calculate index of first element in page\n    // divided by number of elemnt in each page add one (starts from 0)\n\n    this.fetchData(event.first / this.rows + 1);\n  }\n  \n// render as grid\n  itemTemplate(product, layout) {\n    if (!product) {\n      return \"\";\n    }\n    return (\n      <>\n          <MovieBox data={product} openDetails={this.openDetails} />\n      </>\n    );\n  }\n\n  renderHeader() {\n\n  \n  }\n\n  render() {\n    const header = this.renderHeader();\n\n    return (\n      <>\n        <div className=\"movie-grid\" >\n          <div className=\"card\" style = {{backgroundColor:\"#001a33\"}} >\n            <DataView \n              value={this.state.products}\n              layout={this.state.layout}\n              header={header}\n              itemTemplate={this.itemTemplate}\n              lazy\n              paginator\n              paginatorPosition={\"bottom\"}\n              rows={this.rows}\n              totalRecords={this.state.totalRecords}\n              first={this.state.first}\n              onPage={this.onPage}\n              loading={this.state.loading}\n            />\n          </div>\n        </div>\n\n        <MovieModal\n          close_details={this.close_details}\n          MovieModalIsOpen={this.state.MovieModalIsOpen}\n          selectedFilmId={this.state.selectedFilmId}\n        />\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}